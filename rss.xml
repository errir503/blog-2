<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Diel Duarte blog]]></title><description><![CDATA[Diel Duarte personal blog]]></description><link>https://dielduarte.dev</link><generator>GatsbyJS</generator><lastBuildDate>Tue, 24 Nov 2020 16:42:46 GMT</lastBuildDate><item><title><![CDATA[Modeling your first application using Statecharts and Xstate]]></title><description><![CDATA[hold up! this post is gonna be translated to english soon.]]></description><link>https://dielduarte.dev/en/modeling-your-first-application-using-statecharts-and-xstate/</link><guid isPermaLink="false">https://dielduarte.dev/en/modeling-your-first-application-using-statecharts-and-xstate/</guid><pubDate>Sun, 22 Nov 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;hold up! this post is gonna be translated to english soon.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Modelando sua primeira aplica√ß√£o com Statecharts e Xstate]]></title><description><![CDATA[Nesse e nos pr√≥ximos posts vamos contruir uma aplica√ß√£o utilizando Statecharts e a ajuda da lib Xstate. Os posts ser√£o quebrados em 2 partes‚Ä¶]]></description><link>https://dielduarte.dev/pt-br/modelando-sua-primeira-aplicacao-com-statecharts-e-xstate/</link><guid isPermaLink="false">https://dielduarte.dev/pt-br/modelando-sua-primeira-aplicacao-com-statecharts-e-xstate/</guid><pubDate>Sun, 22 Nov 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Nesse e nos pr√≥ximos posts vamos contruir uma aplica√ß√£o utilizando Statecharts e a ajuda da lib Xstate. Os posts ser√£o quebrados em 2 partes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;O post que voc√™ est√° lendo ser√° como modelar sua aplica√ß√£o utilizando Statecharts e Xstate/Viz onde vamos cubrir alguns dos principais conceitos de Statecharts.&lt;/li&gt;
&lt;li&gt;Escrevendo sua aplica√ß√£o com React e Xstate&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sem mais delongas, bora pro post de hoje!&lt;/p&gt;
&lt;p&gt;Antes de come√ßarmos a modelar uma aplica√ß√£o, precisamos entender um pouco mais sobre alguns dos conceitos de Statecharts, vale lembrar tamb√©m que todos os exemplos ser√£o usando Xstate mas voc√™ n√£o precisa de nenhuma lib para come√ßar usar hoje mesmo. Durante o desenvolvimento do modelo, vamos cobrir os seguintes conceitos:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;context&lt;/li&gt;
&lt;li&gt;state&lt;/li&gt;
&lt;li&gt;invoke&lt;/li&gt;
&lt;li&gt;actions&lt;/li&gt;
&lt;li&gt;guards&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Uma das features mais legais do Xstate √© poder vizualizar seu c√≥digo, hoje vamos usar o xstate/viz que vai nos ajudar a criar nosso modelo. Antes de mais nada, abra o seguinte link: xstate/viz , voc√™ provavelmente ver√° uma p√°gina igual a da imagem abaixo, ele ir√° iniciar com uma fetch machine e com o c√≥digo do exemplo do lado direito.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/modeling-your-first-application-using-statecharts-and-xstate/image-1.png&quot; alt=&quot;imagem mostrando o xstate/viz aberto com uma fetch machine.&quot;&gt;&lt;/p&gt;
&lt;p&gt;A primeira coisa que vamos fazer √© atualizar o c√≥digo no Xstate/Viz para o c√≥digo abaixo e clicar em update:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; catsApp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Machine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;catsApp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    initial&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;idle&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    states&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      idle&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O c√≥digo acima √© o c√≥digo basico para iniciarmos uma nova State Machine, cada state machine recebe um id √∫nico, um estado inicial e claro, a lista de estados dispon√≠veis. O resultado ser√°:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/modeling-your-first-application-using-statecharts-and-xstate/image-2.png&quot; alt=&quot;imagem mostrando o resultado do codigo colado no xstate/viz&quot;&gt;&lt;/p&gt;
&lt;p&gt;A primeira coisa a se fazer √© pensar em quais estados nossa aplica√ß√£o pode ter, nesse exemplo vamos criar uma aplica√ß√£o que, ao clicar em um bot√£o busca de uma API uma imagem de um gatinho. A aplica√ß√£o tamb√©m tratar√° errors na api, habilitando o usu√°rio a tentar novamente por 3 vezes consecutivas caso a API retorne errors.&lt;/p&gt;
&lt;p&gt;Com essa breve descri√ß√£o podemos ent√£o dizer que nossa aplica√ß√£o ter√° os seguintes estados:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;idle&lt;/li&gt;
&lt;li&gt;loading&lt;/li&gt;
&lt;li&gt;success&lt;/li&gt;
&lt;li&gt;error&lt;/li&gt;
&lt;li&gt;cant_retry&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;O resultado em c√≥digo ficaria assim:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; catsApp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Machine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;catsApp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    initial&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;idle&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    states&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      idle&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      loading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      success&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      cant_retry&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E o resultado no xstate/viz:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/modeling-your-first-application-using-statecharts-and-xstate/image-3.png&quot; alt=&quot;imagem mostrando o resultado do codigo colado no xstate/viz&quot;&gt;&lt;/p&gt;
&lt;p&gt;N√£o se preocupe caso voc√™ esque√ßa de algum estado da primeira vez, aos poucos e com pr√°tica voc√™ vai pegando maldade e vai conseguir ser mais assertivo em quais estados sua aplica√ß√£o ou seu componente deve ter. Alterar caso precise √© mais simples do que parece, voc√™ pode usar o xstate/viz para te ajudar a vizualizar as mudan√ßas e testar todos os fluxos poss√≠veis.&lt;/p&gt;
&lt;p&gt;Lembra do nosso diagrama de transi√ß√£o de estados falado no primeiro post dessa s√©rie, onde mostramos que come√ßando em um estado A ‚áí um vento X aconteceu ‚áí vamos para um estado B ? O pr√≥ximo passo √© definir quais eventos dentro do seu sistema for√ßa uma transi√ß√£o de estado. Exemplo, quando estamos no estado inicial (&lt;strong&gt;idle)&lt;/strong&gt; podemos dizer que o evento &lt;strong&gt;LOAD&lt;em&gt;NEW&lt;/em&gt;PICTURE&lt;/strong&gt; for√ßa uma transi√ß√£o para o estado &lt;strong&gt;loading&lt;/strong&gt; ou seja:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;idle ‚áí LOAD&lt;em&gt;NEW&lt;/em&gt;PICTURE ‚áí loading&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;loading ‚áí ON_DONE ‚áí sucess&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;loading ‚áí ON_ERROR ‚áí error&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;success ‚áí LOAD&lt;em&gt;NEW&lt;/em&gt;PICTURE ‚áí loading&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;error ‚áí RETRY ‚áí loading&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Em c√≥digo ficaria:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; catsApp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Machine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;catsApp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    initial&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;idle&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    states&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      idle&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      loading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;ON_DONE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;success&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;ON_ERROR&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;error&apos;&lt;/span&gt;  
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      success&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;RETRY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      cant_retry&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;e no xstate/viz:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/modeling-your-first-application-using-statecharts-and-xstate/image-4.png&quot; alt=&quot;imagem mostrando o resultado do codigo colado no xstate/viz&quot;&gt;&lt;/p&gt;
&lt;p&gt;Vizualizar seu c√≥digo √© muito interessante, no exemplo acima, podemos ver nitidamente qual evento leva a aplica√ß√£o para outro estado e todos os fluxos poss√≠veis. E inclusive furos no sistema, veja como o estado cant_retry nunca acontecer√° pois nenhum evento for√ßa uma transi√ß√£o at√© ele ü§∑‚Äç‚ôÇÔ∏è mas calma, n√≥s vamos chegar l√°.&lt;/p&gt;
&lt;h3&gt;Context&lt;/h3&gt;
&lt;p&gt;Context √© uma feature da lib Xstate que ter permite salvar contextos din√¢micos dependendo do estado que sua aplica√ß√£o est√°. Context nesse caso √© o nosso famoso estado como estamos acostumados a usar com outras libs como Redux, Mobx, Context Api no caso de usar com React, ou at√© mesmo um simples componente state.&lt;/p&gt;
&lt;p&gt;Nesse caso, nosso contexto ser√° a nossa foto atual para ser exibida e a quantidade de vezes que o usu√°rio tentou buscar uma nova foto em caso de erros, precisamos iniciar nossa machine com o contexto inicial, o c√≥digo ent√£o ficaria dessa forma:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; catsApp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Machine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;catsApp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    initial&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;idle&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	  context&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	    currentImageUrl&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      retryTimes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    states&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      idle&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      loading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;ON_DONE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;success&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;ON_ERROR&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;error&apos;&lt;/span&gt;  
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      success&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;RETRY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      cant_retry&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Perceba que nesse caso, n√£o temos nenhuma altera√ß√£o nos estados da aplica√ß√£o. Mas no xstate/viz se voc√™ abrir a aba chamada &lt;code class=&quot;language-text&quot;&gt;State&lt;/code&gt; voc√™ pode ver que ele te mostra qual o estado atual da aplica√ß√£o e qual os valores do contexto naquele momento.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/modeling-your-first-application-using-statecharts-and-xstate/image-5.png&quot; alt=&quot;imagem mostrando a aba state no xstate/viz&quot;&gt;&lt;/p&gt;
&lt;h3&gt;Trabalhando com a√ß√µes ass√≠ncronas&lt;/h3&gt;
&lt;p&gt;Em qualquer aplica√ß√£o sempre teremos a√ß√µes que s√£o ass√≠ncronas e os resultados dessas a√ß√µes podem ou n√£o resultar em uma transi√ß√£o de estado. Usando Xstate chamamos isso de Services, e chamar um servi√ßo √© t√£o f√°cil e declarativo quanto qualquer outro conceito.&lt;/p&gt;
&lt;p&gt;No nosso exemplo, o servi√ßo ser√° uma promise que vai fazer o request para buscar uma nova foto. O resultado dessa promise, se com sucesso ou erro gerara transi√ß√µes de estados. Pensando em um fluxo de dados quando a aplica√ß√£o sai do estado de ocioso(idle) para loading √© nesse momento que devemos ent√£o fazer nosso request. Preste bem aten√ß√£o no estado de loading no proximo exemplo:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; catsApp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Machine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;catsApp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    initial&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;idle&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	  context&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	    currentImageUrl&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      retryTimes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    states&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      idle&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      loading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        invoke&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	        src&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fetchNewPicture&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          onDone&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;success&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          onError&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;error&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      success&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;RETRY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      cant_retry&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   services&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;fetchNewPicture&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Substitu√≠mos nossos eventos por uma key chamada &lt;strong&gt;invoke,&lt;/strong&gt; que recebe nesse exemplo, 3 configura√ß√µes: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;src&lt;/strong&gt;:  √â uma fun√ß√£o que retorna uma promisse. No nosso c√≥digo estamos passando apenas o nome da fun√ß√£o que ser√° chamada  e como segundo par√¢metro da fun√ß√£o &lt;strong&gt;Machine&lt;/strong&gt;, passamos um objeto com a key &lt;strong&gt;services&lt;/strong&gt; que nada mais √© que outro objeto com todos os servi√ßos que podem ser chamados.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;onDone&lt;/strong&gt;: Qual o pr√≥ximo estado vamos redirecionar nossa machine se tudo ocorrer bem.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;onError&lt;/strong&gt;: Qual o pr√≥ximo estado vamos redirecionar nossa machine se algum erro acontecer.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Vale lembrar que um servi√ßo pode ser uma promisse, observables, callback ou outra machine.&lt;/p&gt;
&lt;p&gt;A vizualiza√ß√£o do nosso c√≥digo ficaria assim:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/modeling-your-first-application-using-statecharts-and-xstate/image-6.png&quot; alt=&quot;imagem mostrando o resultado do codigo colado no xstate/viz&quot;&gt;&lt;/p&gt;
&lt;p&gt;Da pra perceber que o viz coloca invoke / nome do servi√ßo dentro da quadradinho que representa o estado atual e tamb√©m o nome do servi√ßo dentro de um par√™nteses nos eventos simbolizando que aquele evento est√° relacionado ao servi√ßo chamado.&lt;/p&gt;
&lt;h3&gt;Actions&lt;/h3&gt;
&lt;p&gt;Actions s√£o fun√ß√µes do tipo fire-and-forget, ou seja, fun√ß√µes  que n√£o geram uma transi√ß√£o de estados. As actions por√©m, s√£o muito usadas para rodar qualquer tipo de side effect que podem atualizar nosso contexto.&lt;/p&gt;
&lt;p&gt;No nosso exemplo, quando a promisse que busca uma nova foto retorna precisamos chamar uma action para atualizar o valor do nosso contexto currentImageUrl.&lt;/p&gt;
&lt;p&gt;Qualquer transi√ß√£o de estado dentro do Xstate pode receber apenas uma string com o nome do novo estado ou um objeto de configura√ß√£o, onde passamos o target que representa o pr√≥ximo estado e outras configura√ß√µes como por exemplo, uma action. Nesse caso vamos alterar nosso invoke objeto para:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;invoke&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  src&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fetchNewPicture&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  onDone&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;success&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;setCurrentImageUrl&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  onError&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;error&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Perceba que passamos apenas uma string que √© refer√™ncia para uma fun√ß√£o action, tamb√©m vamos passar a action no segundo parametro da fun√ß√£o Machine, dessa forma, eu acredito que fica mais simples de ler nossa machine. O c√≥digo final ficaria assim:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; catsApp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Machine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;catsApp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    initial&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;idle&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	  context&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	    currentImageUrl&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      retryTimes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    states&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      idle&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      loading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        invoke&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	        src&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fetchNewPicture&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          onDone&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
				    target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;success&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
				    actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;setCurrentImageUrl&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
				  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          onError&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;error&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      success&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;RETRY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      cant_retry&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   services&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;fetchNewPicture&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;setCurrentImageUrl&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       currentImageUrl&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;imageUrl
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Uma action recebe por par√¢metro, o contexto atual e um event, esse event nada mais √© do que o retorno do servi√ßo, como nosso servi√ßo nesse caso √© uma promisse, nosso event ser√° o retorno dela. Caso nosso servi√ßo fosse um callback por ex, esse event seria a chamada do callback com qualquer informa√ß√£o adicional que o servi√ßo queira passar para a action.&lt;/p&gt;
&lt;p&gt;A vizualiza√ß√£o do c√≥digo ficaria assim:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/modeling-your-first-application-using-statecharts-and-xstate/image-7.png&quot; alt=&quot;imagem mostrando o resultado do codigo colado no xstate/viz&quot;&gt;&lt;/p&gt;
&lt;p&gt;Perceba que o Viz coloca uma lista de a√ß√µes que acontecem quando um evento √© disparado com do / nome da action bem abaixo da representa√ß√£o visual de um evento.&lt;/p&gt;
&lt;p&gt;Seguindo nosso exemplo, sempre que a promisse retornar um erro e o usu√°rio envia o evento RETRY devemos incrementar o valor de retryTimes no nosso contexto,  tamb√©m devemos resetar esse valor caso a promisse retorne com sucesso. Nesse caso, vamos adiconar uma action quando chamamos o evento RETRY e outra quando a promisse retorna com sucesso:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; catsApp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Machine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;catsApp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    initial&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;idle&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	  context&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	    currentImageUrl&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      retryTimes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    states&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      idle&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      loading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        invoke&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	        src&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fetchNewPicture&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          onDone&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
				    target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;success&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
				    actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;setCurrentImageUrl&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;resetRetryTimes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
				  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          onError&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;error&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      success&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;RETRY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
            actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;incrementRetryTimes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      cant_retry&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   services&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;fetchNewPicture&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;setCurrentImageUrl&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       currentImageUrl&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;imageUrl
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;resetRetryTimes&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; retryTimes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;incrementRetryTimes&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       retryTimes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;retryTimes &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A vizualiza√ß√£o do c√≥digo ficaria assim:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/modeling-your-first-application-using-statecharts-and-xstate/image-8.png&quot; alt=&quot;imagem mostrando o resultado do codigo colado no xstate/viz&quot;&gt;&lt;/p&gt;
&lt;p&gt;Agora voc√™ j√° sabe reconhecer quando uma action √© chamada apenas olhando a vizualiza√ß√£o do c√≥digo üöÄ.&lt;/p&gt;
&lt;h3&gt;Guards&lt;/h3&gt;
&lt;p&gt;Guards s√£o usados para garantir que uma transi√ß√£o de estado que depende de alguma regra de negocio seja feita com seguran√ßa, usando o nosso exemplo, quando a promisse que busca uma nova foto retorna um erro, o usu√°rio pode tentar buscar novamente por 3 vezes. Ao tentar 3 vezes e sem sucesso, o usu√°rio √© ent√£o redirecionado para um estado onde ele n√£o pode mais tentar buscar uma nova foto.&lt;/p&gt;
&lt;p&gt;Para fazer isso acontecer iremos usar os guards, o jeito de configurar um guard √© bem simples, no nosso caso, o evento RETRY vai conter duas poss√≠veis branchs:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;  error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token constant&quot;&gt;RETRY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;incrementRetryTimes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;cant_retry&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
       &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Nesse caso nada acontece, pois ainda n√£o adicionamos o nosso guard, para adicionar um ou mais guards basta colocar uma key cond na branch que deve ser redirecionada apenas se o guard retornar true. As branchs s√£o sempre lidas por ordem que foram declaradas, ou seja, nesse caso vamos colocar nosso guard na primeira branch, caso o retorno do guard seja falso iremos ent√£o para a pr√≥xima op√ß√£o que vai ent√£o for√ßar uma transi√ß√£o de estado para o estado cant_retry,  nosso c√≥digo ficaria assim:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;  error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token constant&quot;&gt;RETRY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;incrementRetryTimes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          cond&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;canRetry&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;cant_retry&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
       &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Novamente usamos a string para referenciar ao nome da fun√ß√£o guard que estar√° no segundo par√¢metro do m√©todo Machine, c√≥digo final ficaria assim:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; catsApp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Machine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;catsApp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    initial&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;idle&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	  context&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	    currentImageUrl&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      retryTimes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; 
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    states&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      idle&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      loading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        invoke&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	        src&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fetchNewPicture&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          onDone&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
				    target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;success&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
				    actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;setCurrentImageUrl&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;resetRetryTimes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
				  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          onError&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;error&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      success&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
         &lt;span class=&quot;token constant&quot;&gt;RETRY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
	        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	          target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	          actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;incrementRetryTimes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	          cond&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;canRetry&apos;&lt;/span&gt;
	        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
	        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	          target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;cant_retry&apos;&lt;/span&gt;
	        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	       &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      cant_retry&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   services&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;fetchNewPicture&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;setCurrentImageUrl&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       currentImageUrl&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;imageUrl
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;resetRetryTimes&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; retryTimes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;incrementRetryTimes&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       retryTimes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;retryTimes &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   guards&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;canRetry&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;retryTimes &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/modeling-your-first-application-using-statecharts-and-xstate/image-9.png&quot; alt=&quot;imagem mostrando o resultado do codigo colado no xstate/viz&quot;&gt;&lt;/p&gt;
&lt;p&gt;Perceba que agora nosso estado cant_retry tem uma liga√ß√£o com o evento Retry, e n√≥s temos dois eventos Retry que representam por ordem as branchs que declaramos. Perceba tamb√©m que a primeira branch dentro do evento tem um array de guards e os nomes dessas condi√ß√µes, um guard fica verde em caso retorne true e vermelho em caso retorne false representando que aquele evento n√£o vai acontecer.&lt;/p&gt;
&lt;h3&gt;Type final&lt;/h3&gt;
&lt;p&gt;Estados do tipo final, representam que aquela machine est√° terminada, ou seja, nenhum evento ou transi√ß√£o ir√° acontecer depois que a machine chegar a esse estado. No nosso exemplo, o estado cant_retry √© nosso estado final. Vale lembrar que uma machine n√£o necessariamente precisa ter um estado final.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; catsApp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Machine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;catsApp&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    initial&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;idle&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	  context&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	    currentImageUrl&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      retryTimes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    states&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      idle&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      loading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        invoke&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	        src&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fetchNewPicture&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          onDone&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
				    target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;success&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
				    actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;setCurrentImageUrl&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;resetRetryTimes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
				  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          onError&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;error&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      success&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token constant&quot;&gt;LOAD_NEW_PICTURE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        on&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
         &lt;span class=&quot;token constant&quot;&gt;RETRY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
	        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	          target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;loading&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	          actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;incrementRetryTimes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	          cond&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;canRetry&apos;&lt;/span&gt;
	        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
	        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	          target&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;cant_retry&apos;&lt;/span&gt;
	        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	       &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      cant_retry&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;final&apos;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   services&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;fetchNewPicture&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   actions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;setCurrentImageUrl&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       currentImageUrl&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;imageUrl
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;resetRetryTimes&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; retryTimes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;incrementRetryTimes&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       retryTimes&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;  context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;retryTimes &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   guards&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token function-variable function&quot;&gt;canRetry&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;retryTimes &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Bom modelar uma aplica√ß√£o parece divertido agora, principalmente sabendo que todo o c√≥digo que escrevemos nessa tarefa √© o mesmo c√≥digo que ser√° usado na aplica√ß√£o final. No pr√≥ximo post iremos de fato usar esse codigo e criar nossa aplica√ß√£o front-end usando react e xstate.&lt;/p&gt;
&lt;p&gt;Te vejo l√°!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Web development with state charts intro]]></title><description><![CDATA[hold up! this post is gonna be translated to english soon.]]></description><link>https://dielduarte.dev/en/web-development-with-state-charts-intro/</link><guid isPermaLink="false">https://dielduarte.dev/en/web-development-with-state-charts-intro/</guid><pubDate>Sun, 01 Nov 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;hold up! this post is gonna be translated to english soon.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Introdu√ß√£o a state charts em aplica√ß√µes web]]></title><description><![CDATA[Era uma vez um Front-end que n√£o conhecia State Charts e tinha uma tarefa muito ‚Äúsimples‚Äù, construir um componente de input. O  ‚Äúsimples‚Ä¶]]></description><link>https://dielduarte.dev/pt-br/introducao-a-state-charts-em-aplicacoes-web/</link><guid isPermaLink="false">https://dielduarte.dev/pt-br/introducao-a-state-charts-em-aplicacoes-web/</guid><pubDate>Sun, 01 Nov 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Era uma vez um Front-end que n√£o conhecia State Charts e tinha uma tarefa muito ‚Äúsimples‚Äù, construir um componente de input. O  ‚Äúsimples‚Äù input para edi√ß√£o de um nome tinha algumas varia√ß√µes de estados:&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;inicial&lt;/code&gt;: O input aparece desabilitado, o usu√°rio pode ent√£o clicar no √≠cone de editar. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;editando&lt;/code&gt;: O input est√° habilitado para receber o novo valor de nome, o usu√°rio pode ent√£o clicar no √≠cone de salvar.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;salvando&lt;/code&gt;: No lugar dos √≠cones de editar/salvar mostramos um loading sinalizando que alguma a√ß√£o ass√≠ncrona est√° acontecendo, nesse caso, estamos salvando o novo valor de nome.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/web-development-with-state-charts-intro/image-1.jpg&quot; alt=&quot;imagem mostrando o component de input e seus estados.&quot;&gt; &lt;/p&gt;
&lt;h2 class=&quot;subtitle--separator&quot;&gt;&lt;/h2&gt;
&lt;p&gt;Nosso querido Front-end come√ßou a implementa√ß√£o com duas vari√°veis boleanas:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;isEditing &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
isSaving &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E uma fun√ß√£o de &lt;strong&gt;&lt;em&gt;onClick&lt;/em&gt;&lt;/strong&gt; que recebia por parametro os valores de &lt;code class=&quot;language-text&quot;&gt;isEditing&lt;/code&gt; e &lt;code class=&quot;language-text&quot;&gt;isSaving&lt;/code&gt;.  Seu pensamento foi: A primeira vez que a fun√ß√£o de onClick for chamada, estamos no estado inicial, logo preciso enviar o usu√°rio para o estado de &lt;strong&gt;&lt;em&gt;editando&lt;/em&gt;&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;isEditing&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isSaving&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;isEditing &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;isSaving&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    isEditing &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/web-development-with-state-charts-intro/image-2.jpg&quot; alt=&quot;imagem mostrando o component de input em seu estado inicial e mostrando que o √≠cone editar possui um evento de on click.&quot;&gt; &lt;/p&gt;
&lt;p&gt;Ao chegar no estado de edi√ß√£o e sabendo que o usu√°rio poderia novamente clicar no √≠cone que dessa vez se transformava no √≠cone para salvar, o mesmo continuou sua implementa√ß√£o adicionando mais um trecho c√≥digo na fun√ß√£o de &lt;strong&gt;&lt;em&gt;onClick&lt;/em&gt;&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;isEditing&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isSaving&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;isEditing &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;isSaving&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    isEditing &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isEditing&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    isEditing &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    isSaving &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;saveName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       isSaving &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
       isEditing &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O trecho de c√≥digo adicionado primeiro testa se o usu√°rio est√° no estado de &lt;strong&gt;&lt;em&gt;edi√ß√£o&lt;/em&gt;&lt;/strong&gt;, caso verdadeiro, faz o switch das vari√°veis para levar o usu√°rio para o estado de &lt;strong&gt;&lt;em&gt;salvando&lt;/em&gt;&lt;/strong&gt;, e logo em seguida faz um request na api para salvar o novo valor de nome. Ao receber um retorno da api, resetamos as duas vari√°veis boleanas para false, pois agora, o usu√°rio n√£o est√° editando e nem salvando um novo valor, o que supostamente levaria o usu√°rio para o estado &lt;strong&gt;&lt;em&gt;inicial&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/web-development-with-state-charts-intro/image-3.png&quot; alt=&quot;imagem mostrando o component de input saindo do esado de editando para salvando, e depois de salvando para inicial.&quot;&gt;&lt;/p&gt;
&lt;p&gt;N√£o muito confiante na solu√ß√£o, deu a task como terminada e seguiu sua vida.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/web-development-with-state-charts-intro/gif-1.gif&quot; alt=&quot;gif de um menino nerd dando joinha.&quot;&gt;&lt;/p&gt;
&lt;h2 class=&quot;subtitle--separator&quot;&gt;&lt;/h2&gt;
&lt;p&gt;‚Ä¶Era uma vez um designer, que esqueceu de trabalhar no estado de erro do ‚Äúsimples‚Äù componente de input.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;‚ÄúHey dev, Esqueci de um detalhe, n√£o tratamos o estado de erro do input. Quando der erro, volta pro estado de edi√ß√£o por que o cliente pode tentar salvar novamente.‚Äù&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Mesmo sabendo que a solu√ß√£o atual n√£o era a ideal, continuou com a mesma implementa√ß√£o para adicionar o estado de erro, agora, ao inv√©s de 2 vari√°veis boleanas, seriam tr√™s:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;isEditing &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
isSaving &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
isError &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Essa pequena adi√ß√£o resultou na fun√ß√£o de onClick abaixo:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;isEditing&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isSaving&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;isEditing &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;isSaving&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    isEditing &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isEditing&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    isEditing &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    isSaving &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    isError &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;saveName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       isSaving &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
       isEditing &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       isError &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
       isSaving &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
       isEditing &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Task concluida novamente.
Desconfort√°vel com a solu√ß√£o final, foi pesquisar. Afinal, qual o problema com vari√°veis boleanas? &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/web-development-with-state-charts-intro/image-4.png&quot; alt=&quot;imagem mostrando que podemos ter 8 varia√ß√µes usando 3 vari√°veis booleanas.&quot;&gt;&lt;/p&gt;
&lt;p&gt;O problema √© que como na imagem acima, apesar de parecer inofensiva e √≥bvio, 1 vari√°vel boleana representa duas varia√ß√µes. O por√©m que ningu√©m lembra √© que adicionando mais de uma vari√°vel, suas varia√ß√µes crescem exponencialmente. Com tr√™s vari√°veis boleanas como no exemplo acima, temos 8 varia√ß√µes.&lt;/p&gt;
&lt;p&gt;E a√≠, voc√™ acha que o c√≥digo acima est√° preparado para lidar com 8 varia√ß√µes? A resposta infelizmente √©: n√£o. Seu c√≥digo pode parecer simples e estar 99% vuner√°vel a bugs.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/web-development-with-state-charts-intro/image-5.jpg&quot; alt=&quot;meme de um homem tampando a placa do carro pela metada na primeira parte da foto, e na segunda parte tampando a outra.&quot;&gt;&lt;/p&gt;
&lt;p&gt;Sabendo disso, podemos fazer diferente, podemos mapear todos os estados em uma constante:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; stateType &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;IDLE&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;IDLE&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;EDITING&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;EDITING&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;SAVING&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;SAVING&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&apos;ERROR&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;ERROR&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podemos tamb√©m criar um objeto que nos diga qual o estado atual e qual o pr√≥ximo estado, exemplo:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; nextState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;IDLE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;EDITING&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;EDITING&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SAVING&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SAVING&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     success&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;IDLE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
     error&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;ERROR&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;ERROR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SAVING&lt;/span&gt;
 &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Limitaremos ent√£o o estado do input para apenas UM estado por vez:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;inputState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;IDLE&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;E nossa fun√ß√£o de onClick receberia apenas o nosso estado atual por par√¢metro, e usando o objecto nextState, saberiamos qual o pr√≥ximo estado dever√≠amos mover nosso componente. Exemplo:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;currentInputState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;currentInputState &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;EDITING&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token function&quot;&gt;saveName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; currentInputState &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; nextState&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;saving&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;success&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; currentInputState &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; nextState&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;stateType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;saving&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	  currentInputState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nextState&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;currentInputState&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Podemos resumir nossa hist√≥ria em problema e solu√ß√£o:&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Problema:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Manter o estado usando vari√°veis condicionais ficou confuso, al√©m de obrigar a tratar todos os edge cases e rezar para que o estado n√£o ca√≠sse em poss√≠veis combina√ß√µes que n√£o foram tratadas.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Solu√ß√£o:&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Ter um √∫nico estado por vez e definir as transi√ß√µes entre estados atrav√©s de um evento.&lt;/p&gt;
&lt;h2 class=&quot;subtitle--separator&quot;&gt;&lt;/h2&gt;
&lt;p&gt;Nossa solu√ß√£o tem um nome: &lt;code class=&quot;language-text&quot;&gt;Finite State Machines&lt;/code&gt;, mas a final oq √© Finite State Machines? &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Uma M√°quina de estados finita (Finite State Machines ou FSM) √© um modelo matem√°tico usado para representar programas de computadores ou circuitos l√≥gicos. O conceito √© concebido como uma m√°quina abstrata que deve estar em &lt;strong&gt;UM&lt;/strong&gt; de um n√∫mero finito de estados.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;source: &lt;a href=&quot;https://pt.wikipedia.org/wiki/M%C3%A1quina_de_estados_finita&quot;&gt;https://pt.wikipedia.org/wiki/M√°quina&lt;em&gt;de&lt;/em&gt;estados_finita&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Uma forma bem simples de representar FSM √© usando um diagrama de transi√ß√£o de estados, onde o conseguimos vizualizar todo o fluxo de transi√ß√£o de estados por exemplo:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;come√ßando em um estado A ‚áí um vento X aconteceu ‚áí vamos para um estado B&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/web-development-with-state-charts-intro/image-6.png&quot; alt=&quot;imagem mostrando um diagrama de transi√ß√£o de estados&quot;&gt;&lt;/p&gt;
&lt;h3&gt;Finite State Machines? State charts? que confus√£o!&lt;/h3&gt;
&lt;p&gt;Quando come√ßamos a estudar mais sobre Finete State Machines vamos sempre nos deparar com um outro nome que √© &lt;code class=&quot;language-text&quot;&gt;State Charts&lt;/code&gt;, mas a prop√≥sito qual a grande diferen√ßa entre eles? &lt;/p&gt;
&lt;p&gt;Como qualquer solu√ß√£o, Finite State Machines por s√≠ s√≥ tem alguns problemas, geralmente acabam com um grande n√∫mero de estados, muitos deles com transi√ß√µes id√™nticas, tornando muito verboso e de dif√≠cil manuten√ß√£o. Este √© o famoso problema conhecido como explos√£o de estados.&lt;/p&gt;
&lt;p&gt;State Charts por sua vez, apareceu pouco tempo depois adicionando solu√ß√µes para que FSM fossem mais escal√°vel a medida que o seu sistema fosse crescendo e ficando mais complexo. Al√©m de novas ideias para tornar sua vida mais f√°cil.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/web-development-with-state-charts-intro/image-7.png&quot; alt=&quot;imagem mostrando alguns dos conceitos que state charts cont√©m, como activity, actions, paralel states entre outros...&quot;&gt;&lt;/p&gt;
&lt;p&gt;Vale lembrar que a ideia foi apresentada h√° mais de 20 anos atr√°s, al√©m de ser uma das bases da computa√ß√£o, √© usada largamente em hardware embarcados e games! Com o aparecimento da lib Xstate que vamos descobrir no pr√≥ximo post, o uso na web e pricipalmente usando Javascript est√° crescendo cada vez mais. Apenas para deixar um gostinho do que vamos ver no pr√≥ximo artigo e tamb√©m sobre uma das maiores vantagens de se usar State Charts que √© o poder de vizualizar seu c√≥digo, d√° uma olhada como ficaria nosso codigo do componente de input usando Xstate:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://xstate.js.org/viz/?gist=d73e129d583ac4a0ba956736e68dbdd2&quot;&gt;https://xstate.js.org/viz/?gist=d73e129d583ac4a0ba956736e68dbdd2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;N√£o se preocupe se n√£o entendeu o c√≥digo, vamos aprender tudo sobre o uso de Xstate e State Charts em uma aplica√ß√£o real no pr√≥ximo artigo!&lt;/p&gt;
&lt;h3&gt;Estado? √â tipo redux?&lt;/h3&gt;
&lt;p&gt;Quando trabalhamos com State Charts, os famosos estados n√£o s√£o os estados din√¢micos ou relacionados a dados de uma aplica√ß√£o e sim em qual cen√°rio de uma possibilidade finita e pr√© estabelecida uma aplica√ß√£o est√°, lembre-se da regra de ouro, uma aplica√ß√£o pode estar em UM √∫nico estado por vez. Exemplo:&lt;/p&gt;
&lt;p&gt;Sua aplica√ß√£o pode estar no estado de loading e ter um contexto &lt;code class=&quot;language-text&quot;&gt;user=null&lt;/code&gt;, em uma pr√≥ximo momento sua aplica√ß√£o estaria em um estado de logado e ter um contexto &lt;code class=&quot;language-text&quot;&gt;user={ id: 1, name:  &amp;#39;Diel&amp;#39; }&lt;/code&gt;. Com esse exemplo fica f√°cil assimilar que o estado como estamos acostumados no Redux ou outras op√ß√µes s√£o chamados de contexto no mundo dos statecharts.&lt;/p&gt;
&lt;p&gt;Te vejo no pr√≥ximo post, onde vamos aprender a como modelar uma aplica√ß√£o utilizando State Charts e Xstate.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[O jeito mais simples de entender identity functors]]></title><description><![CDATA[Eu realmente gosto de linguagens funcionais, e eu tenho estudado algumas nos √∫ltimos anos como Elm e agora Reason apenas por divers√£o. Nunca‚Ä¶]]></description><link>https://dielduarte.dev/pt-br/o-jeito-mais-simples-de-entender-functors/</link><guid isPermaLink="false">https://dielduarte.dev/pt-br/o-jeito-mais-simples-de-entender-functors/</guid><pubDate>Tue, 14 Jul 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Eu realmente gosto de linguagens funcionais, e eu tenho estudado algumas nos √∫ltimos anos como Elm e agora Reason apenas por divers√£o. Nunca fiz nada s√©rio com essas linguagens como um App em produ√ß√£o em alguma empresa que trabalhei, mas eu gosto de trazer conceitos dessas linguagens para o Javascript. Meu problema √© que de alguma forma eu sempre acabo frustrado quando estou estudando alguns dos conceitos de programa√ß√£o funcional,&lt;/p&gt;
&lt;p&gt;como functors.&lt;/p&gt;
&lt;h2 class=&quot;subtitle--separator&quot;&gt;Mais oque realmente s√£o functors?&lt;/h2&gt;
&lt;p&gt;O jeito mais f√°cil de entender functors na minha humilde opini√£o √© o conceito: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Functors s√£o fun√ß≈çes que retornam o valor passado de uma maneira que voc√™ consegue mapea-lo quantas vezes precisar at√© chegar no resultado desejado. Dessa forma, isso vai te ajudar a vizualizar melhor o fluxo de transforma√ß√£o do dado ao inv√©z de ficar criando v√°rias vari√°veis na m√©moria para salvar os estados intermedi√°rios da transforma√ß√£o que n√£o s√£o √∫teis no resultado final. Lembra do m√©todo &lt;code class=&quot;language-text&quot;&gt;promise.then&lt;/code&gt; que conseguimos encadear v√°rias chamadas &lt;code class=&quot;language-text&quot;&gt;.then&lt;/code&gt; tratando cada passo na transforma√ß√£o dos dados.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;talk is cheap, show me the code.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Qualquer tipo de valor pode ser mapeavel com functors como podemos ver no exemplo abaixo onde money √© uma string:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertMoneyToNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;functor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;money&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;money&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; money&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;\$&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;parseFloat&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//same as .map(money =&gt; parseFloat(money))&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Considerando que temos uma fun√ß√£o como essa:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertMoneyToNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; moneyWithoutMask &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; money&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;\$&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parseFloat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;moneyWithoutMask&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Vamos criar um helper chamado functor, essa fun√ß√£o aceita qualquer tipo de valor e retorna esse valor mape√°vel como arrays, ent√£o agora conseguimos encadear chamadas .map transformando qualquer valor no valor desejado.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;functor&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;anyValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;functor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;anyValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  value&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; anyValue
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Como podemos ver, a fun√ß√£o functor recebe &lt;code class=&quot;language-text&quot;&gt;qualquer valor&lt;/code&gt; e retorna um objeto com:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Um m√©todo chamado &lt;code class=&quot;language-text&quot;&gt;map&lt;/code&gt; que recebe a fun√ß√£o e retorna um functor do valor que a fun√ß√£o passada retornou, fazendo com que o valor retornado seja mape√°vel novamente.&lt;/li&gt;
&lt;li&gt;Um campo chamado &lt;code class=&quot;language-text&quot;&gt;value&lt;/code&gt; que cont√©m o resultado da ultima fun√ß√£o executada, pesquisando voc√™ vai achar varia√ß√µes dessa ideia como o m√©todo &lt;code class=&quot;language-text&quot;&gt;flatMap&lt;/code&gt; que retorna o valor da fun√ß√£o executada sem encapsular o mesmo em um functor, ent√£o na √∫ltima chamada da pilha de maps ao inv√©s de chamar &lt;code class=&quot;language-text&quot;&gt;map(anyValue).value&lt;/code&gt; voc√™ vai chamar apenas &lt;code class=&quot;language-text&quot;&gt;flatMap(anyValue)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Agora com o nosso functor helper, podemos converter a fun√ß√£o convertMoneyToNumber para:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertMoneyToNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;functor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;money&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;money&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; money&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;\$&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;parseFloat&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//same as .map(money =&gt; parseFloat(money))&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Agora n√≥s podemos mapear qualquer tipo de valor transformando seu valor original em um novo valor, n√£o apenas arrays! E s√≥ para deixarmos claro essa √© s√≥ a base da ideia de functors, temos muitas outras variantes e formas de compor functors.&lt;/p&gt;
&lt;p&gt;Eu espero que voc√™ tenha aprendido algo novo hoje! &lt;/p&gt;</content:encoded></item><item><title><![CDATA[The easier way to understand identity functors]]></title><description><![CDATA[I really like functional programming, and have been studying it during last years, including elm and more recently Reason, just for fun‚Ä¶]]></description><link>https://dielduarte.dev/en/the-easier-way-to-understand-functors/</link><guid isPermaLink="false">https://dielduarte.dev/en/the-easier-way-to-understand-functors/</guid><pubDate>Tue, 14 Jul 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;I really like functional programming, and have been studying it during last years, including elm and more recently Reason, just for fun. Never shipped some production ready app in these languages but really fancy the idea to bring some of their concepts to javascript. But somehow I always ended up frustrated with some functional techniques explanations,&lt;/p&gt;
&lt;p&gt;like functors.&lt;/p&gt;
&lt;h2 class=&quot;subtitle--separator&quot;&gt;What are functors in fact?&lt;/h2&gt;
&lt;p&gt;The easier way to understand functors in my humble opinion is the concept of: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Functors are functions that return the value passed in a way that this value can be mapped over and over again till you get the result expected. it will help you to visualize the flow of the value transformation instead of creating multiple variables in memory in an imperative way, think like the &lt;code class=&quot;language-text&quot;&gt;promise.then&lt;/code&gt; method that can be chained step by step.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;talk is cheap, show me the code.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Any type of value can be mappable with functors as we can see in the example below where money is a string:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertMoneyToNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;functor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;money&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;money&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; money&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;\$&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;parseFloat&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//same as .map(money =&gt; parseFloat(money))&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Considering we have a function like that previously:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertMoneyToNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; moneyWithoutMask &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; money&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;\$&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parseFloat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;moneyWithoutMask&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let‚Äôs create a functor helper first, this function accepts any value and makes it mappable like arrays, so now we can chain .map transforming any value on the value desired:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;functor&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;anyValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;functor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;anyValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  value&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; anyValue
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As we can see, the functor helper receives &lt;code class=&quot;language-text&quot;&gt;any value&lt;/code&gt; and returns an object with:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A method called &lt;code class=&quot;language-text&quot;&gt;map&lt;/code&gt; that receives a function and returns a functor of this function execution value, making the new value mappable again.&lt;/li&gt;
&lt;li&gt;A field called &lt;code class=&quot;language-text&quot;&gt;value&lt;/code&gt; that contains the final result of the last function execution, searching you can find variants of this idea like a flatMap method that just returns the last function execution without wrapping it in a functor, then in the last execution instead of using &lt;code class=&quot;language-text&quot;&gt;.map().value&lt;/code&gt; you can just use &lt;code class=&quot;language-text&quot;&gt;.flatMap(anyValue)&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now with this helper, we can convert the convertMoneyToNumber to the first example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;convertMoneyToNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;functor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;money&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;money&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; money&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token regex-source language-regex&quot;&gt;\$&lt;/span&gt;&lt;span class=&quot;token regex-delimiter&quot;&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;parseFloat&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//same as .map(money =&gt; parseFloat(money))&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we can map any type of value transforming its original value in a new value, not only arrays! Just to be clear this is just the base of the functors idea, there are many more variants.&lt;/p&gt;
&lt;p&gt;I hope you have learned something new today! &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Dicas para times remotos]]></title><description><![CDATA[Esse √© um material sobre comunica√ß√£o ass√≠ncrona, algumas ferramentas e dicas para manter uma equipe remota baseado em minha experi√™ncia e‚Ä¶]]></description><link>https://dielduarte.dev/pt-br/dicas-para-times-remotos/</link><guid isPermaLink="false">https://dielduarte.dev/pt-br/dicas-para-times-remotos/</guid><pubDate>Sun, 19 Apr 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Esse √© um material sobre comunica√ß√£o ass√≠ncrona, algumas ferramentas e dicas para manter uma equipe remota baseado em minha experi√™ncia e estudos. N√£o estamos falando de uma ci√™ncia exata e recomendo testar as dicas por algumas semanas e avaliar os resultados com a ajuda de feedbacks da equipe. &lt;/p&gt;
&lt;h2 class=&quot;subtitle--separator&quot;&gt;Async vs realtime&lt;/h2&gt;
&lt;p&gt;Tente manter a comunica√ß√£o ass√≠ncrona sempre que poss√≠vel, assimilar que conversas em real time s√£o como reuni√µes pode ajudar. J√° pensou ficar em reuni√£o 8 horas por dia? Em uma situa√ß√£o de extrema desorganiza√ß√£o remota isso pode acontecer, como resultado, a produtividade do time cai.&lt;/p&gt;
&lt;p&gt;Evitar usar ferramentas de chat em tempo real pode ajudar. No lugar tente ferramentas como Twist  que basicamente organiza toda a comunica√ß√£o do time por thread. &lt;/p&gt;
&lt;p&gt;Assim como todo time de desenvolvimento tem um cultura de fazer code review em alguns momentos do dia, tamb√©m ser√° necess√°rio implantar a mesma ideia para que a equipe dedique um tempo do dia para checar todas as threads em que eles est√£o participando e responder/tomar a√ß√µes se necess√°rio.&lt;/p&gt;
&lt;p&gt;Use chats em tempo real para situa√ß√µes de emerg√™ncia como um bug em produ√ß√£o, assuntos que realmente precisam de uma resposta em tempo real / situa√ß√µes do dia a dia como:	&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ei, n√£o consigo achar onde esta documento X, pode me ajudar?&lt;/li&gt;
&lt;li&gt;Estou com um problema que n√£o consigo resolver, algu√©m livre para fazer um pair programming?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;E claro, para conversas informais em grupos ou privadas&lt;/p&gt;
&lt;h3&gt;One Monday&lt;/h3&gt;
&lt;p&gt;One monday √© um conceito v√°lido principalmente para times em m√∫ltiplos timezones. O conceito consiste em entender que em uma comunica√ß√£o ass√≠ncrona em um ambiente remoto estarei sujeito a ter que esperar at√© 24 horas para receber uma resposta dependendo do timezone das pessoas envolvidas. Reafirmo a dica, em casos de situa√ß√µes urgentes usem chats em tempo real ou liga√ß√µes para parear com webcam ligada.&lt;/p&gt;
&lt;h2&gt;Converse com as pessoas certas&lt;/h2&gt;
&lt;p&gt;Se voc√™ precisa discutir algo sobre marketing, envie no grupo de marketing, crie thread apenas com as pessoas relacionadas a marketing ou relacionadas ao assunto que voc√™ precisa resolver/discutir, dessa forma evitamos distra√ß√µes desnecess√°rias para o resto do time.&lt;/p&gt;
&lt;p&gt;Receber notifica√ß√µes ou participar de todas as threads a todo momento sobre assuntos que o integrante do time n√£o precisa participar, al√©m de ser uma distra√ß√£o desnecess√°ria, muitas vezes for√ßa os integrantes a mutar ou ignorar o canal de comunica√ß√£o para que consigam focar no trabalho e como resultado, um gap de comunica√ß√£o muito maior&lt;/p&gt;
&lt;h2&gt;Crie grupos por time e/ou √°reas de conhecimento&lt;/h2&gt;
&lt;p&gt;Evite criar grupos para cada assunto ou cada tarefa que precisa ser discutida, em quest√£o de dias isso pode virar um caos e ningu√©m sabe em que grupo responder, mais uma vez aumentando o gap de comunica√ß√£o. &lt;/p&gt;
&lt;p&gt;Exemplo de grupos por time:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;time dashboard&lt;/li&gt;
&lt;li&gt;time site&lt;/li&gt;
&lt;li&gt;RH&lt;/li&gt;
&lt;li&gt;Marketing&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Exemplo de grupos por √°reas de conhecimento:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Front-end&lt;/li&gt;
&lt;li&gt;Back-end&lt;/li&gt;
&lt;li&gt;Designers&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Use grupos por √°reas de conhecimento para aumentar o engajamento e a troca de conhecimento ou ajudas r√°pidas. Faz muito mais sentido um front-end perguntar uma d√∫vida ou dicas de CSS em um grupo focado sobre front-end ao inv√©s de perguntar no chat geral da empresa, para apenas uma pessoa ou mesmo no grupo de back-end.&lt;/p&gt;
&lt;h2&gt;Status&lt;/h2&gt;
&lt;p&gt;Uma √≥tima maneira saud√°vel de saber quando algu√©m est√° online ou n√£o √© usando o pr√≥prio status de chats em real time. Algumas ferramentas, como Slack, permitem aos usu√°rios adicionarem status diferentes de apenas online/offline. Uma ideia que meu time atual aplica e tem funcionado muito bem s√£o os status:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/status-1.png&quot; alt=&quot;imagem mostrando status pr√© definidos al√©m de online ou offline&quot;&gt;&lt;/p&gt;
&lt;p&gt;O status √© exibido ao lado do nome do usu√°rio:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/status-2.png&quot; alt=&quot;imagem mostrando status ao lado do nome do us√°rio&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/status-3.png&quot; alt=&quot;imagem mostrando status ao lado do nome do us√°rio em uma conversa real&quot;&gt;&lt;/p&gt;
&lt;p&gt;No exemplo acima, eu sei que o usu√°rio Magdiel Duarte est√° offline no momento, isso quer dizer que, mesmo ao enviar uma mensagem direta para ele a resposta n√£o vai ser instant√¢nea, e tudo bem, mande a mensagem da mesma forma e espere. Se precisar realmente de uma resposta urgente sempre mande em grupos onde mais pessoas podem ajudar.&lt;/p&gt;
&lt;h2&gt;Reuni√µes&lt;/h2&gt;
&lt;p&gt;Sempre fa√ßa reuni√µes com a webcam ligada, isso gera um engajamento maior na equipe, faz as pessoas se sentirem confort√°veis com aquele momento e manterem o foco.&lt;/p&gt;
&lt;h3&gt;C-Levels meetings&lt;/h3&gt;
&lt;p&gt;Uma das t√©cnicas apresentadas pelo livro ‚ÄúIt doesn‚Äôt have to be crazy at work‚Äù √© um conceito onde, 1 ou 2 dias na semana os C-levels ficam por algumas horas dispon√≠veis para reuni√µes com qualquer pessoa/time da empresa, os hor√°rios ficam p√∫blicos no calend√°rio e qualquer time/pessoa pode marcar uma reuni√£o nesse hor√°rio para disctuir sobre algum assunto. Fora desse hor√°rio fica restrigindo apenas para assuntos urgentes.&lt;/p&gt;
&lt;p&gt;Tive a oportunidade de trabalhar em uma empresa anterior a atual, onde aplicavam esse conceito e era muito bacana pois os C-levels dessa empresa participavam muito de todas as decis√µes. Lembra do conceito sobre chat em real time ser considerado reuni√£o? Imagine o dia-a-dia de um C-level tendo que responder a todo momento d√∫vidas via chat, eles simplesmente n√£o v√£o conseguir produzir nada al√©m de responder o chat.&lt;/p&gt;
&lt;h3&gt;Daily Reports&lt;/h3&gt;
&lt;p&gt;Daily reports podem ser feitas por calls com a webcam ligada ou via texto. &lt;/p&gt;
&lt;p&gt;Em um time distribu√≠do em m√∫ltiplos timezones texto acaba sendo uma boa op√ß√£o. Ferramentas como o &lt;a href=&quot;https://statushero.com/&quot;&gt;Status Hero&lt;/a&gt;  ajudam as pessoas a n√£o esquecerem de mandarem os reports e automatiza esse processo, al√©m de trazer alguns insights como produtividade geral da equipe e deixar todas as Dailys Reports documentadas em um dashboard bem interessantes.&lt;/p&gt;
&lt;p&gt;Optar por Dailys Reports via calls pode trazer ainda mais engajamento, principalmente se o dia a dia do time n√£o envolve em ter muitas reuni√µes. &lt;/p&gt;
&lt;p&gt;Nesse caso realmente vai depender de qual op√ß√£o vai deixar o time mais confort√°vel, recomendo testar as duas formas.&lt;/p&gt;
&lt;h2&gt;TIL - Today I learned&lt;/h2&gt;
&lt;p&gt;Uma das maiores reclama√ß√µes quando se migra para um regime remoto √© a troca de conhecimento, o &lt;strong&gt;Today I learned&lt;/strong&gt; √© um canal onde as pessoas da empresas compartilham conhecimento, algum post bacana sobre uma tecnologia nova, uma t√©cnica que pode ajudar em algum momento, um v√≠deo sobre uma palestra interessante. Literalmente qualquer coisa que o integrante da empresa achar que vale a pena ser compartilhado com os colegas.&lt;/p&gt;
&lt;p&gt;Apesar do nome ser &lt;strong&gt;Today I learned&lt;/strong&gt;, n√£o √© necessariamente obrigat√≥rio postar algo novo todos os dias, mas sim, quando achar que vale a pena ser compartilhado.&lt;/p&gt;
&lt;h2&gt;Thanks&lt;/h2&gt;
&lt;p&gt;Uma das maiores preocupa√ß√µes pessoais quando uma pessoa migra para um trabalho remoto √© sobre visibilidade, afinal, no regime remoto √© muito d√≠ficil ter algu√©m observando como voc√™ se comporta no trabalho al√©m das suas entregas. √â v√°lido lembrar que o trabalho de uma pessoa e o qu√£o importante ela √© para a empresa vai muito al√©m de apenas entregas relacionadas diretamente ao seu cargo, aqui pode ser o lugar perfeito para aprender mais sobre as soft skills de uma pessoa de forma remota.&lt;/p&gt;
&lt;p&gt;O canal &lt;strong&gt;Thanks,&lt;/strong&gt; √© um conceito que algumas empresas aplicam onde as pessoas agradecem umas as outras publicamente por algum feito que um colega fez e a ajudou no seu trabalho. Dessa forma fica registrado de forma p√∫blica a√ß√µes que as vezes fica muito d√≠ficil observar remotamente, como ajudar um colega com um bug de forma privada, ensinar algo novo, e v√°rias outras coisas.&lt;/p&gt;
&lt;p&gt;Al√©m de criar um ambiente muito bom para se trabalhar onde as pessoas s√£o gratas umas as outras, aumentanto ainda mais o engajamento do todo como um time.&lt;/p&gt;
&lt;h2&gt;Hero&lt;/h2&gt;
&lt;p&gt;Hero √© um conceito v√°lido se o time precisa prestar suporte, seja interno ou externo. O conceito consiste em a cada per√≠odo de tempo determinado pela equipe uma pessoa √© o &lt;strong&gt;hero,&lt;/strong&gt; essa pessoa √© respons√°vel por conversar diretamenta com o time de suporte, analizar e organizar tarefas relacionadas no backlog e trabalhar para resolver os problemas.&lt;/p&gt;
&lt;p&gt;Com uma pessoa focada nisso, o resto do time pode focar em trabalhar em novas features ou grandes refactors sem interrup√ß√µes para prestar suporte. Isso √© usado para organizar melhor o tempo da equipe entre Deep e Shalow Work outros conceitos bem importantes de se estudar.&lt;/p&gt;
&lt;p&gt;Uma das minhas refer√™ncias em trabalho remoto e Deep Work √© a empresa Doist onde aplicam esses conceitos. Eles tem um blog muito bom e super recomendo a leitura principalmente dos posts sobre Deep Work e Hero + House Keeping.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://doist.com/blog/deep-work/?utm_source=doist_blog&amp;#x26;utm_medium=referral&amp;#x26;utm_campaign=heroes_housekeeping_days&quot;&gt;https://doist.com/blog/deep-work&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://doist.com/blog/heroes-housekeeping-days/&quot;&gt;https://doist.com/blog/heroes-housekeeping-days/&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Calend√°rio&lt;/h2&gt;
&lt;p&gt;Uma das melhores formas de se ter uma big picture sobre tudo que est√° acontecendo na empresa √© usando o calend√°rio. &lt;/p&gt;
&lt;p&gt;Especialmente recomendo o Google Calendar, nele √© poss√≠vel fazer com que todo mundo tenha acesso ao calend√°rio de todos e que de forma f√°cil consiga mandar convites para reuni√µes, por exemplo sem ter que previamente perguntar para todo mundo qual o melhor hor√°rio. Algumas empresas pedem para o time colocarem no calend√°rio principalmente quando n√£o est√£o dispon√≠veis, por exemplo:&lt;/p&gt;
&lt;p&gt;Maria sempre vai a academia as 2 pm, ela pode ent√£o nesse caso adicionar no calend√°rio um evento dizendo que n√£o est√° dispon√≠vel no hor√°rio de 2 pm - 3 pm todos os dias, ficando ao crit√©rio da Maria colocar o porque caso se sinta a vontade para ou apenas ‚ÄúOcupado‚Äù.&lt;/p&gt;
&lt;h2&gt;Micro-managment&lt;/h2&gt;
&lt;p&gt;Muito cuidado com micro gerenciamento de pessoas, se voc√™ precisa perguntar h√° uma pessoa o que ela est√° trabalhando temos com certeza algum gap de comunica√ß√£o acontecendo. O ideal √© usar algum software de gerenciamento de tarefas ou at√© mesmo planilhas (o que o time achar melhor). Onde cada pessoa pode estar fazendo apenas uma tarefa por vez, que fique claro qual o status atual e de forma p√∫blica para todos do time.&lt;/p&gt;
&lt;h2&gt;FOMO - medo de estar perdendo algo&lt;/h2&gt;
&lt;p&gt;Esse √© um problema pessoal, que pode acontecer ou n√£o e varia muito de pessoa para pessoa. Mas a postura da empresa relacionada a isso pode ajudar a diminuir os casos a 0. Ser firme com 8 horas trabalhadas por dia e nada mais - com excess√£o a casos urgentes - √© um √≥timo come√ßo! &lt;/p&gt;
&lt;p&gt;Um cultura onde pessoas da equipe ficam online 24 horas por dia, trabalham at√© nos finais de semana n√£o pode nunca ser visto com bons olhos pela empresa e pelos l√≠deres das equipes, isso leva a um alto risco de burnout que √© um problema s√©rio de sa√∫de, e para empresa representa uma queda brusca de produtividade a m√©dio e longo prazo.&lt;/p&gt;
&lt;p&gt;Para a equipe:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Tenham seus hor√°rios de trabalho e sigam a risca, manter uma rotina √© muito importante em um regime remoto.&lt;/li&gt;
&lt;li&gt;Se poss√≠vel n√£o baixem o chat da empresa em seus celulares pessoais.&lt;/li&gt;
&lt;li&gt;Configure para receber notifica√ß√µes apenas nos hor√°rios em que voc√™ esteja trabalhando.&lt;/li&gt;
&lt;li&gt;Tenha em mente que trabalho √© um processo cont√≠nuo, voc√™ pode continuar amanh√£.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Tips for remote teams]]></title><description><![CDATA[This is a post about async communication, tools, and tips to keep a remote team based on my experi√™ncie and studies. We‚Äôre not talking about‚Ä¶]]></description><link>https://dielduarte.dev/en/tips-for-remote-teams/</link><guid isPermaLink="false">https://dielduarte.dev/en/tips-for-remote-teams/</guid><pubDate>Sun, 19 Apr 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;This is a post about async communication, tools, and tips to keep a remote team based on my experi√™ncie and studies. We‚Äôre not talking about a precise science, that said, I highly recommend to test the tips for some weeks and analyze the results with the help of the team feedback.&lt;/p&gt;
&lt;h2 class=&quot;subtitle--separator&quot;&gt;Async vs realtime&lt;/h2&gt;
&lt;p&gt;Try to keep the communication as much async as possible, assimilate that real-time chats are the same as meetings can help. Can you think about spending 8 hours a day in a meeting? In a real situation of extreme remote disorganization it can happen, as a result, the team productivity decreases.&lt;/p&gt;
&lt;p&gt;Avoid using real-time tools, instead, try tools like &lt;a href=&quot;https://twist.com&quot;&gt;Twist&lt;/a&gt; that basically organizes all the team communication by threads.&lt;/p&gt;
&lt;p&gt;Like every developer teams have the culture to spend some time of the day doing code review, it will be necessary to implement the same culture to spend some time of the day checking all threads that they are participating and answer them/take actions if needed.&lt;/p&gt;
&lt;p&gt;Use real-time tools in emergency situations like a bug in production, topics that really requires an answer in real time or day to day situations like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hey, can you help me to find that document X? I can‚Äôt find!&lt;/li&gt;
&lt;li&gt;I‚Äôve a problem that I can‚Äôt fix, someone free to a pair programming?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;and of course, informal conversations in groups or private.&lt;/p&gt;
&lt;h3&gt;One Monday&lt;/h3&gt;
&lt;p&gt;One Monday is a valid concept especially for teams in multiple timezones. The concept means that in an async communication I‚Äôm supposed to know that an answer can delay till 24 hours depending on the timezone of the rest of the team and company. I highly recommend that in emergency situations use real-time chats or video calls.&lt;/p&gt;
&lt;h2&gt;Talk with the right people&lt;/h2&gt;
&lt;p&gt;if you need to talk about marketing, send the message in the marketing group, start threads with only the right people related to the marketing topic or related to the topic that you want to discuss. In this way we avoid unnecessary distractions to the rest of the team.&lt;/p&gt;
&lt;p&gt;Receiving notifications about everything all the time, besides being an unnecessary distraction, forces people to mute the communication channel or start ignoring it in order to be able to focus at the work, as a result, a bigger communication gap&lt;/p&gt;
&lt;h2&gt;Add groups by team and knowledge areas&lt;/h2&gt;
&lt;p&gt;Avoid creating groups to each topic or each task that needs to be discussed, in a matter of days this might turn in a big problem and nobody will know in which group answer, again increasing the communication gap.&lt;/p&gt;
&lt;p&gt;Group examples by teams:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;team dashboard&lt;/li&gt;
&lt;li&gt;team website&lt;/li&gt;
&lt;li&gt;Team marketing&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Group examples by knowledge areas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Front-end&lt;/li&gt;
&lt;li&gt;Back-end&lt;/li&gt;
&lt;li&gt;Designers&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Use groups by knowledge areas to increase engagement and knowledge sharing. It makes much more sense a front-end ask some questions about CSS in a group focused in front-end instead of asking in a general chat with everyone of the company or even in a group focused in the back-end.&lt;/p&gt;
&lt;h2&gt;Status&lt;/h2&gt;
&lt;p&gt;A good way to know if someone is online or not is using chat status. Some tools, like Slack, enable the users to add more status besides only online/offline. A nice idea that my current team use and it is working well are the statuses:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/status-1.png&quot; alt=&quot;imagem mostrando status pr√© definidos al√©m de online ou offline&quot;&gt;&lt;/p&gt;
&lt;p&gt;We can see the status next to the user name:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/status-2.png&quot; alt=&quot;imagem mostrando status ao lado do nome do us√°rio&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/status-3.png&quot; alt=&quot;imagem mostrando status ao lado do nome do us√°rio em uma conversa real&quot;&gt;&lt;/p&gt;
&lt;p&gt;In the example above, I know that the user Magdiel Duarte is offline, it means that even though I send a message to him the answers won‚Äôt be instantaneous and that‚Äôs okay! send the message in the same way and wait. If you really need an instantaneously answer always send in groups where more people can help.&lt;/p&gt;
&lt;h2&gt;Meetings&lt;/h2&gt;
&lt;p&gt;Always uses video calls with video enabled, it increases the team engagement, makes people feel more comfortable with that moment and keep them focused.&lt;/p&gt;
&lt;h3&gt;C-Levels meetings&lt;/h3&gt;
&lt;p&gt;One of the techniques listed in the book ‚ÄúIt doesn‚Äôt have to be crazy at work‚Äù is a concept that 1 or 2 weekdays the C-levels are free for some hours to make meetings with anyone in the company, the time slots are somehow public to everyone, using google calendar for example. outside these time slots, meetings with C-levels are restricted to only urgent topics.&lt;/p&gt;
&lt;p&gt;Do you remember about chats in real-time being considered meetings? Just imagine a day to day of a C-level answering people questions all the time, they wouldn‚Äôt be able to work besides answering questions.&lt;/p&gt;
&lt;h3&gt;Daily Reports&lt;/h3&gt;
&lt;p&gt;Daily reports might be done either by video calls with video enabled or via text.&lt;/p&gt;
&lt;p&gt;In a distribuited team in multiple timezones text is a good option. Tools like &lt;a href=&quot;https://statushero.com/&quot;&gt;Status Hero&lt;/a&gt; help people to not forget to send the reports, save all daily reports in a nice dashboard and bring some interesting insights like general productivity by day.&lt;/p&gt;
&lt;p&gt;Choosing Daily reports via video calls might increase the engagement, especially if the day to day doesn‚Äôt have a lot of meetings.&lt;/p&gt;
&lt;p&gt;In this case, I highly recommend testing the two ways and ask people feedback to choose one.&lt;/p&gt;
&lt;h2&gt;TIL - Today I learned&lt;/h2&gt;
&lt;p&gt;One of the main concerns, when people start working remotely, is the lack of knowledge sharing. Today I learned is a channel where people share knowledge whenever they think is worth it to share, not necessarily regards the company context and not necessarily every day.&lt;/p&gt;
&lt;h2&gt;Thanks&lt;/h2&gt;
&lt;p&gt;One of the main concerns as well is about visibility when people start working remotely. Thanks is a channel where people can publically say thanks to a coworker about something he or she has done to help in any situation. Here‚Äôs a good way to learn about someone‚Äôs soft skills remotely, build an environment where people are grateful of each other, increasing team engagement.&lt;/p&gt;
&lt;h2&gt;Hero&lt;/h2&gt;
&lt;p&gt;Hero is a valid concept if the team needs to work with either external or internal support. The concept
means that by each time period determined by the team one person is the &lt;strong&gt;hero,&lt;/strong&gt; this person is responsable to talk directly with the support team, analyze and organize backlog tasks related and work to solve the problems.&lt;/p&gt;
&lt;p&gt;With one person focused on it, the rest of the team can focus to work in new features or big refactors without interruptions to help the support team. It is used to better organize the team time between deep and shalow work, two other important concepts to study.&lt;/p&gt;
&lt;p&gt;One of my references about remote work and deep work is the Doist company, where they apply these concepts. They have a nice blog and I highly recomend two posts about Deep Work and Hero + House Keeping.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://doist.com/blog/heroes-housekeeping-days/&quot;&gt;https://doist.com/blog/heroes-housekeeping-days/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://doist.com/blog/deep-work/?utm_source=doist_blog&amp;#x26;utm_medium=referral&amp;#x26;utm_campaign=heroes_housekeeping_days&quot;&gt;https://doist.com/blog/deep-work&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Calendar&lt;/h2&gt;
&lt;p&gt;One of the best ways to get a big picture of everything that is happening at the company is using the calendar.&lt;/p&gt;
&lt;p&gt;I especially recommend google calendar, with google calendar it is possible to share everyone‚Äôs calendars with everyone and in an easy way people can send you an invite to a meeting just looking at the free spots, without need to ask you. A good thing to do is to add at the calendar especially when you a not available, some companies ask you to even add personal things if it is during your ‚Äúwork hours‚Äù. e.g:&lt;/p&gt;
&lt;p&gt;John goes to the gym every day at 2 pm, so he can add it to the calendar to let people know that he isn‚Äôt available between 2 pm - and 3 pm. If John doesn‚Äôt feel comfortable to add ‚Äúgoing to the gym‚Äù at the event description, he can put just ‚Äúoccupied‚Äù.&lt;/p&gt;
&lt;h2&gt;Micro-managment&lt;/h2&gt;
&lt;p&gt;Be careful with people micro-management, if you need to ask someone what they are working on, for sure we have a communication problem. The best scenario is to use one task management software or even excel sheets - what‚Äôs making more sense for you - where each people can do one task at a time with clear status and within public access for everyone to.&lt;/p&gt;
&lt;h2&gt;FOMO - fear of missing out&lt;/h2&gt;
&lt;p&gt;This is a personal issue, that can happen or not depends on the person. But the company culture can help to decrease the cases to zero. The company can create a rule of 8 hours a day working and nothing more with only exceptions in urgent cases is a great start!&lt;/p&gt;
&lt;p&gt;A culture where people are online 24 hours per day, work even at the weekends cannot be viewed as a good thing by the company and the team leaders. This brings people to a high risk of burnout which is a serious problem, and to the company represents a hight decrease in productivity in the medium and long term.&lt;/p&gt;
&lt;p&gt;To the team:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Keep a routine, it is super important working remotely&lt;/li&gt;
&lt;li&gt;If possible, do not download the company chat on your personal mobile phone.&lt;/li&gt;
&lt;li&gt;configure to receive notifications only in your work hours&lt;/li&gt;
&lt;li&gt;keep in mind that work is a continuous process, you can continue tomorrow!&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Um ano trabalhando remoto]]></title><description><![CDATA[Trabalhar remoto foi uma das melhores decis√µes que tomei at√© agora, espero que voc√™ possa aprender algo com a minha exp√™riencia. ‚Ä¶Mas isso‚Ä¶]]></description><link>https://dielduarte.dev/pt-br/um-ano-trabalhando-remoto/</link><guid isPermaLink="false">https://dielduarte.dev/pt-br/um-ano-trabalhando-remoto/</guid><pubDate>Mon, 20 Jan 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Trabalhar remoto foi uma das melhores decis√µes que tomei at√© agora, espero que voc√™ possa aprender algo com a minha exp√™riencia.&lt;/p&gt;
&lt;h3 class=&quot;subtitle--separator&quot;&gt;Primeiro de tudo,trabalho remoto n√£o significa qualidade de vida.&lt;/h3&gt;
&lt;p&gt;‚Ä¶Mas isso pode ajudar MUITO! Na minha humilde opini√£o pessoas que dizem que trabalho remoto √© qualidade de vida est√£o querendo te vender ou te passar uma vis√£o que n√£o √© 100% verdadeira. Sua qualidade de vida n√£o aumenta s√≥ porque voc√™ come√ßou a trabalhar remoto.&lt;/p&gt;
&lt;p&gt;O que ajuda muito na sua qualidade de vida √© a flexibilidade que o trabalho remoto te d√°.&lt;/p&gt;
&lt;h3&gt;Voc√™ n√£o precisa trabalhar todo dia no mesmo hor√°rio mais&lt;/h3&gt;
&lt;p&gt;De fato voc√™ apende muito sobre voc√™, como por exemplo qual o hor√°rio sou mais produtivo trabalhando? Qual o melhor hor√°rio para ir correr ou ir na academia? Qual o melhor hor√°rio para trabalhar naquela tarefa que precisa 100% do seu foco? E muitas outras perguntas‚Ä¶Agora voc√™ aprendeu sobre uma pessoa totalmente nova dentro de voc√™, que voc√™ nem sabia que existia. Isso √© maravilhoso! Mas tem alguns problemas que vamos conversar sobre o decorrer desse post.&lt;/p&gt;
&lt;h3&gt; Voc√™ n√£o precisa perder o seu tempo indo ao escrit√≥rio&lt;/h3&gt;
&lt;p&gt;Eu passei 5 anos indo da minha cidade para outra cidade para trabalhar/estudar, era apenas 50 minutos de dist√¢ncia. Em 5 anos, eu gastei 3 meses da minha vida apenas indo trabalhar.&lt;/p&gt;
&lt;p&gt;S√©rio, eu adoraria usar esses 3 meses de f√©rias, estudando, com minha familia/amigos. Qualquer coisa, menos no caminho para o trabalho.&lt;/p&gt;
&lt;p&gt;Tamb√©m √© importante te lembrar que voc√™ pode usar esse tempo para fazer algo produtivo, tempo √© vida,e essa √© uma chance √∫nica que nem todo mundo tem acesso. Pense sobre isso!&lt;/p&gt;
&lt;h3&gt;Voc√™ pode trabalhar em qualquer lugar&lt;/h3&gt; 
&lt;p&gt;‚Ä¶Se voc√™ tiver uma boa conex√£o de internet!!! Eu aposto que voc√™ j√° viu muitas fotos de pessoas trabalhando remoto na praia. Hmmm‚Ä¶ Me desculpe, mas n√£o existe uma boa conex√£o de internet na praia, pelo menos n√£o no Brasil.&lt;/p&gt;
&lt;p&gt;Mas √© verdade, eu literalmente posso trabalhar onde eu quiser. Esse ano eu viajei para os Estados Unidos 2 vezes, Chile uma vez, e agora estou indo para o Canad√°. Eu n√£o precisei pedir f√©rias para os meus chefes, eles n√£o se importam qual √© o meu timezone, a coisa mais importante √© entregar valor,resolver problemas e manter os projetos funcionando! N√£o importa onde vivo, meu timezone ou quem sou. No meu time temos pessoas do Brasil, R√∫ssia, √çndia, Pol√¥nia, Estados Unidos e mais‚Ä¶&lt;/p&gt;
&lt;h3&gt;Agora vem a qualidade de vida&lt;/h3&gt; 
&lt;p&gt;Quando voc√™ fecha o seu computador depois das 8 horas di√°rias e pode ser o melhor marido, filho, amigo ou simplesmente pode cuidar das suas coisas como, estudar sem ter que dormir menos de 8 horas por dia pra isso, tocar um instrumento musical dia de semana, viajar quando voc√™ quiser.&lt;/p&gt;
&lt;p&gt;Voc√™ tamb√©m precisa cuidar da sua sa√∫de, s√©rio, no come√ßo eu estava apenas comendo fast food e tive s√©rios problemas de sa√∫de muito r√°pido. Cuidar da sua sa√∫de, seu corpo e sua mente n√£o tem nada haver com trabalho remoto.&lt;/p&gt;
&lt;p&gt;Voc√™ tamb√©m pode ganhar mais e isso pode ajudar muito. Trabalhando remoto voc√™ pode trabalhar para empresas que pagam mais que a m√©dia, empresas no Brasil n√£o podem pagar um bom sal√°rio comparando com um sal√°rio em dol√°res. Vamos ser honestos, voc√™ pode ter uma vida muito melhor se voc√™ ganha melhor, isso √© conhecido como capitalismo! Eu sinceramente n√£o sei o qu√£o bom capitalismo √©, mas √© um fato.&lt;/p&gt;
&lt;h1&gt;E quais os problemas?&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Ficar isolado.&lt;/li&gt;
&lt;li&gt;FOMO.&lt;/li&gt;
&lt;li&gt;Trabalhar mais de 8 horas por dia.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Todos esses s√£o problemas que voc√™ tem que enfrentar ao trabalhar remoto se voc√™ n√£o se organizar bem, e eles podem trazer problemas s√©rios para voc√™.&lt;/p&gt;
&lt;h3&gt;Ficar isolado&lt;/h3&gt;
&lt;p&gt;Quando voc√™ come√ßa a trabalhar remoto voc√™ vai ficar muito mais tempo na sua casa do que antes, isso vai te for√ßar a ficar isolado do resto do mundo. √â importante que voc√™ tenha amigos, saia para almo√ßar/jantar, conhe√ßa novas pessoas indo em meetups, confer√™ncias e pratique exerc√≠cios f√≠sicos. Resumindo, SAIA DE CASA, converse com pessoas, fique mais tempo com sua fam√≠lia e amigos. N√£o fique isolado do resto do mundo.&lt;/p&gt;
&lt;h3&gt;FOMO ou medo de estar perdendo algo&lt;/h3&gt;
&lt;p&gt;Eu n√£o posso te ajudar muito com isso, porque eu continuo aprendendo como lidar com isso. E isso √© um grande problema para muitas pessoas que trabalham remotamente. A melhor coisa a se fazer √© dar o seu 100% enquanto voc√™ est√° trabalhando e simplesmente ignorar totalmente quando voc√™ est√° offline. &lt;/p&gt;
&lt;p&gt;Quase 98% das coisas que acontecem no trabalho n√£o s√£o urgentes, eu recomendo muito a leitura do livro &lt;a href=&quot;https://www.amazon.com/Doesnt-Have-Be-Crazy-Work/dp/0062874780/ref=sr_1_1?crid=29HZM51PVO126&amp;#x26;keywords=it+doesn%27t+have+to+be+crazy+at+work&amp;#x26;qid=1579489696&amp;#x26;sprefix=it+doesn%2Caps%2C161&amp;#x26;sr=8-1&quot;&gt;it doesn‚Äôt have to be crazy at work&lt;/a&gt; para voc√™ entender mais sobre t√©cnicas para manter a sanidade no trabalho, sendo remoto ou n√£o.&lt;/p&gt;
&lt;h3&gt;Trabalhar mais do que 8 horas por dia&lt;/h3&gt;
&lt;p&gt;Pelo menos na minha experi√™ncia, isso n√£o acontece todos os dias. Mas conhe√ßo muitas pessoas que trabalham muito mais do que 8 horas por dia e √© normal, voc√™ sente uma press√£o que voc√™ mesmo coloca porque voc√™ n√£o tem mais seu chefe olhando voc√™ ‚Äútrabalhando‚Äù e a √∫nica forma de provar que voc√™ est√° trabalhando s√£o as suas entregas.&lt;/p&gt;
&lt;p&gt;Mas n√£o fique com medo, trabalhar √© um processo cont√≠nuo e voc√™ pode continuar amanh√£!&lt;/p&gt;
&lt;h1&gt;Vale a pena?&lt;/h1&gt;
&lt;p&gt;Como eu disse no come√ßo do texto, trabalhar remoto foi uma das melhores decis√µes que tomei at√© hoje na minha carreira. Seja seletivo, procure uma boa empresa com um bom ambiente para se trabalhar remoto e aproveite a sua nova vida!&lt;/p&gt;
&lt;p&gt;Eu espero que voc√™ tenha aprendido algo novo hoje! ‚ù§Ô∏è&lt;/p&gt;</content:encoded></item><item><title><![CDATA[A year working remotely]]></title><description><![CDATA[Working remotely has been one of the best decisions that I have made up to this point. I hope you can learn something from my experience‚Ä¶]]></description><link>https://dielduarte.dev/en/a-year-working-remotely/</link><guid isPermaLink="false">https://dielduarte.dev/en/a-year-working-remotely/</guid><pubDate>Mon, 20 Jan 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Working remotely has been one of the best decisions that I have made up to this point. I hope you can learn something from my experience.&lt;/p&gt;
&lt;h3 class=&quot;subtitle--separator&quot;&gt;First of all, remote work doesn‚Äôt mean better quality of life.&lt;/h3&gt;
&lt;p&gt;‚Ä¶but it can help A LOT! in my humble opinion, people who say that remote work is better quality of life, they just wanna sell something to you that isn‚Äôt a hundred percent true. your quality of life doesn‚Äôt get better just because you started working remotely.&lt;/p&gt;
&lt;p&gt;what helps the most with your quality of life is the flexibility that remote work brings you &lt;/p&gt;
&lt;h3&gt;You don&apos;t have to work at the same time everyday anymore&lt;/h3&gt;
&lt;p&gt;In fact, you learn so much about yourself, like what time am I more productive? what‚Äôs the best time to go outside to run or go to the gym ? what‚Äôs the best time to work on a task that needs my entire focus ? and many more questions‚Ä¶ now you‚Äôve learned about a new person inside you, that you didn‚Äôt know before. THIS IS SICK! but has some trade offs, we are gonna talk more about it later.&lt;/p&gt;
&lt;h3&gt;You don&apos;t have to lose your time going to the office&lt;/h3&gt;
&lt;p&gt;I spent 5 years going from my city to another city to work/study, it was just 50 minutes away. In five years I spent 3 months in commuting time.&lt;/p&gt;
&lt;p&gt;seriously, I would love to use those three months for vacations,studying or spend this time with my family and friends. Anything, but not on my way to work‚Ä¶&lt;/p&gt;
&lt;p&gt;Is also important to remind you to do something productive with this time, time is life, and that‚Äôs a unique chance that few people have. think about it!&lt;/p&gt;
&lt;h3&gt;You can work anywhere&lt;/h3&gt; 
&lt;p&gt;‚Ä¶if you have internet!!! I doubt that you have seen pictures of people working at the beach, hmm‚Ä¶ I‚Äôm sorry, but there‚Äôs no good connection at the beach, at least not here in Brazil.&lt;/p&gt;
&lt;p&gt;But yeah, I literally can work anywhere I want to, this year I went to the USA two times, Chile one time, and now I‚Äôm going to Canada. I didn‚Äôt have to ask my boss for vacation time, they don‚Äôt care about my timezone, the important thing about my work is delivering value, solving problems, and keeping it working! doesn‚Äôt matter where I‚Äôm based, my timezone or who I am. In my team, we have people from Brazil, Russia, India, Poland, the USA and more‚Ä¶&lt;/p&gt;
&lt;h3&gt;Now comes the quality of life&lt;/h3&gt; 
&lt;p&gt;When you close your computer at a reasonable hour and can be the best spouse, child, friend, Or can care about your stuff, like studying without needing to sleep less than 8 hours for it, do your hobbies, like playing a musical instrument during the weekdays, travel anytime you want.&lt;/p&gt;
&lt;p&gt;you also need to care about your health, seriously, at the beginning I was eating just fast foods and I got serious problems really fast. Take care of your health, your body, and your mind. there‚Äôs no connection between good health and remote work.&lt;/p&gt;
&lt;p&gt;you can also make more money, and it can help a lot. As a remote worker you can work for companies that pay more than average, companies in Brazil can‚Äôt afford a good salary like a salary in dollars, and you can have a better life if you make more money, that‚Äôs capitalism! I‚Äôm not sure how much good is it, but it‚Äôs a fact.&lt;/p&gt;
&lt;h1&gt;How about trade offs?&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Isolation&lt;/li&gt;
&lt;li&gt;FOMO &lt;/li&gt;
&lt;li&gt;Working more than 8 hours a day&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;all of these are trade offs of remote work if you don‚Äôt organize your day and your life, and they can bring serious problems to you.&lt;/p&gt;
&lt;h3&gt;Isolation&lt;/h3&gt;
&lt;p&gt;When you start working remotely, you will spend more time in your house than before, which will force you to be isolated from the rest of humanity. it‚Äôs important to have friends, go out to have dinner/lunch, find new groups like going to meetups, conferences, practice exercises. to sum it up, GO OUT, talk with people, spend more time with your family and friends. Don‚Äôt keep yourself isolated from the rest of the world.&lt;/p&gt;
&lt;h3&gt;FOMO&lt;/h3&gt;
&lt;p&gt;I can‚Äôt help you a lot with FOMO (fear of missing out), ‚Äòcause I‚Äôm still learning how to deal with it. And that‚Äôs a huge problem for me, and other remote workers as well. The best stuff to do is give 100% of you when you are working and just ignore it totally when you are off. Again, almost 98% of things that happen aren‚Äôt urgent, and I need to highly recommend to you the book &lt;a href=&quot;https://www.amazon.com/Doesnt-Have-Be-Crazy-Work/dp/0062874780/ref=sr_1_1?crid=29HZM51PVO126&amp;#x26;keywords=it+doesn%27t+have+to+be+crazy+at+work&amp;#x26;qid=1579489696&amp;#x26;sprefix=it+doesn%2Caps%2C161&amp;#x26;sr=8-1&quot;&gt;it doesn‚Äôt have to be crazy at work&lt;/a&gt; to go deeper on these techniques to keep sanity at work, remotely or not.&lt;/p&gt;
&lt;h3&gt;Working more than 8 hours a day&lt;/h3&gt;
&lt;p&gt;At least in my experience, this doesn‚Äôt happen so often. But I know a lot of people who work remotely and work more than 8 hours a day. You feel a pressure that you put on yourself to show people that you are delivering stuff, cause now, you don‚Äôt have anyone watching you ‚Äúworking‚Äù in an office, the only proof that you are working are the things that you deliver.&lt;/p&gt;
&lt;p&gt;But don‚Äôt be afraid, work is a continuous process, you can continue tomorrow!&lt;/p&gt;
&lt;h1&gt;Is it worth it?&lt;/h1&gt;
&lt;p&gt;As I said at the beginning of this text, working remotely has been one of the best decisions that I did until this point. Be selective, find a good company that provides a healthy remote environment and enjoy your new life!&lt;/p&gt;
&lt;p&gt;I hope you‚Äôve learned something new today!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Dominando code splitting com webpack]]></title><description><![CDATA[Code Splitting √© um processo em build time que quebra parte do seu c√≥digo em pequenos peda√ßos que s√£o requisitados de forma ass√≠ncrona‚Ä¶]]></description><link>https://dielduarte.dev/pt-br/dominando-code-splitting-com-webpack/</link><guid isPermaLink="false">https://dielduarte.dev/pt-br/dominando-code-splitting-com-webpack/</guid><pubDate>Wed, 17 Jul 2019 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Code Splitting √© um processo em build time que quebra parte do seu c√≥digo em pequenos peda√ßos que s√£o requisitados de forma ass√≠ncrona, apenas quando necess√°rio. Vamos conversar sobre como Webpack pode ajudar no processo de Code Splitting para atingir a meta de um site mais perform√°tico.&lt;/p&gt;
&lt;h2 class=&quot;subtitle--separator&quot;&gt;Mas primeiro, como saber quando eu tenho que quebrar o meu c√≥digo em pequenos peda√ßos (chunks)?&lt;/h2&gt;
&lt;p&gt;Os processos mais caros quando falamos sobre renderizar um Website s√£o os processos de download e parsing do Javascript e CSS. Sabendo desse fato, se n√≥s n√£o precisamos de uma parte espec√≠fica do c√≥digo no primeiro render, esse c√≥digo √© um √≥timo candidato para ser quebrado em uma outra parte e ser baixado sobre demanda. &lt;/p&gt;
&lt;p&gt;O Google Chrome tem uma √≥tima ferramenta chamada &lt;code class=&quot;language-text&quot;&gt;coverage&lt;/code&gt; que nos mostra qual porcentagem do c√≥digo baixado est√° ou n√£o est√° sendo usado. Isso pode ser usado como uma m√©trica para seguir e saber o quanto do c√≥digo baixado poderia ser quebrado em partes ass√≠ncronas.&lt;/p&gt;
&lt;p&gt;Para usar essa ferramenta abra o dev tools do Chrome, &lt;code class=&quot;language-text&quot;&gt;cmd/ctrl + p&lt;/code&gt;, e digite &lt;code class=&quot;language-text&quot;&gt;show coverage&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/coverage.png&quot; alt=&quot;imagem mostrando como acessar a janela coverage no dev tools do Chrome&quot;&gt; &lt;/p&gt;
&lt;p&gt;Uma vez que abrimos a op√ß√£o coverage, clique no bot√£o de reload e espere at√© que nosso site seja completamente carregado. Os resultados v√£o nos motrar o quanto do c√≥digo carregado por arquivo est√° sendo usado. √â maravilhoso! üòç&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/result.png&quot; alt=&quot;imagem mostrando a tab coverage, onde nos podemos ver a lista de arquivos baixados e o quanto do c√≥digo de cada arquivo est√° sendo usado.&quot;&gt; &lt;/p&gt;
&lt;p&gt;No exemplo abaixo, 46% do c√≥digo entregue &lt;code class=&quot;language-text&quot;&gt;n√£o&lt;/code&gt; est√° sendo usado, essa m√©trica tamb√©m √© relativa, dependende do tamanho do arquivo e de muitas outras vari√°veis. Ent√£o √© sempre bom entender o contexto que estamos trabalhando quando estivermos usando essas ferramentas.&lt;/p&gt;
&lt;h2&gt;Code splitting e webpack&lt;/h2&gt;
&lt;p&gt;Com Webpack nos temos duas formas de trabalhar com Code Splitting, imports est√°ticos e din√¢micos. As duas formas usam &lt;a href=&quot;https://v8.dev/features/dynamic-import&quot;&gt;dynamic imports, uma feature do es2020&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Imports est√°ticos&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;√â bom para ser usado quanto estivermos importando bibliotecas/m√≥dulos de Javascript pesados.&lt;/li&gt;
&lt;li&gt;Qualquer parte do c√≥digo que chamamos de temporal, ou seja, coisas que n√£o s√£o v√≠siveis todo o tempo na sua p√°gina, exemplos: tooltips, modais/alertas.&lt;/li&gt;
&lt;li&gt;Rotas.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Para usar imports est√°ticos no seu c√≥digo, √© muito simples: &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;path/to/myModule.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ou ainda melhor, criando uma fun√ß√£o que importa o m√≥dulo quando necess√°rio. O import do arquivo √© feito apenas uma vez, depois da primeira √© cacheado e na pr√≥xima vez que usar a fun√ß√£o o m√≥dulo √© retornado instantaneamente, exemplo:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; getModule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; ‚áí &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;path/to/myModule.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;getModule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Imports Dinamicos&lt;/h3&gt;
&lt;p&gt;Imports din√¢micos n√£o s√£o de verdade din√¢micos, porque eles acontecem em build time. Ao usar imports din√¢micos estamos dizendo para o Webpack: Ei Webpack, por favor, crie todos os chunks poss√≠veis para o caminho que eu estou te passando, seja uma pasta, ou v√°rias em build time. Dessa forma nos conseguimos usar vari√°veis o que torna esse processo de import ‚Äúdin√¢mico‚Äù.&lt;/p&gt;
&lt;p&gt;Vamos considerar que n√≥s temos uma pasta de temas, ex:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;themes
  ‚îî‚îÄ‚îÄ dark&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;js
  ‚îî‚îÄ‚îÄ light&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;js&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Como exemplo n√≥s poderiamos importar os temas assim:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; getTheme &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;theme&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; ‚áí &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;path/to/themes/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;theme&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;getTheme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;dark&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;theme&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Dessa forma o Webpack vai criar todos os poss√≠veis chunks em build time para cada tema dentro da pasta &lt;code class=&quot;language-text&quot;&gt;themes&lt;/code&gt;, essa t√©cnica √© chamada de &lt;code class=&quot;language-text&quot;&gt;ContextModule&lt;/code&gt; dentro do c√≥digo do Webpack.&lt;/p&gt;
&lt;h2&gt;Coment√°rios M√°gicos&lt;/h2&gt;
&lt;h3&gt;webpackChunkName&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* webpackChunkName: &quot;my-chunk-name&quot; */&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;path/to/myModule.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Por default o Webpack cria os nomes dos chunks seguindo uma ordem num√©rica, 1.js, 2.js, 3.js, o que torna o processo de reconhecer quais arquivos foram importados dif√≠cil. Usando &lt;code class=&quot;language-text&quot;&gt;webpackChunkName&lt;/code&gt; n√≥s podemos renomear o chunk, √© importante lembrar que para esse coment√°rio m√°gico funcionar n√≥s devemos estar usando &lt;code class=&quot;language-text&quot;&gt;output.chunkFileName: [name].whateverDoYouWantHere.js&lt;/code&gt; no arquivo de configura√ß√£o do Webpack.&lt;/p&gt;
&lt;p&gt;Isso √© √∫til apenas no modo de desenvolvimento, ent√£o podemos fazer algo do tipo ao importar o arquivo:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NODE_ENV&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;development&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* webpackChunkName: &quot;my-chunk-name&quot; */&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;path/to/myModule.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;path/to/myModule.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O &lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt; vai ser removido se o build estiver sendo rodado em modo de produ√ß√£o, e o &lt;code class=&quot;language-text&quot;&gt;else&lt;/code&gt; se estiver rodando em modo de desenvolvimento. Isso √© conhecido como &lt;code class=&quot;language-text&quot;&gt;dead-code elimination&lt;/code&gt; ou em pt-br elimina√ß√£o do c√≥digo morto, ferramentas como Uglify.js e outras usam isso para reduzir o tamanho do arquivo final.&lt;/p&gt;
&lt;h3&gt;webpackMode&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* webpackMode: &quot;lazy&quot; */&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;path/to/themes/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;theme&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;O coment√°rio m√°gico &lt;code class=&quot;language-text&quot;&gt;webpackMode&lt;/code&gt; pode receber 4 tipos de valores:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;lazy: gera um chunk para cada arquivo importado dinamicamente, melhor op√ß√£o para ser usado em produ√ß√£o.&lt;/li&gt;
&lt;li&gt;lazy-once: gera um chunk apenas que pode satisfazer a condi√ß√£o do import din√¢mico, melhor op√ß√£o para o modo de desenvolvimento reduzindo o tempo de de gerar os arquivos finais do Webpack.&lt;/li&gt;
&lt;li&gt;eager: n√£o gera nenhum chunk extra, todos os m√≥dulos s√£o gerados em apenas um arquivo e nenhum request extra √© feito.&lt;/li&gt;
&lt;li&gt;weak: √∫til para universal rendering / ou server side rendering, onde os arquivos s√£o servidos manualmente no primeiro render. O que acontece √© que ao requisitar um m√≥dulo uma promisse √© sempre retornada, mas essa promisse s√≥ retorna com sucesso se requisitada pelo client side. Um novo request nunca √© feito, pois os arquivos j√° est√£o no client pois foram servidos pelo servidor.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Prefetch e Preload&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* webpackPrefetch: true */&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;path/to/themes/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;theme&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* webpackLoad: true */&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;path/to/themes/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;theme&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Os dois coment√°rios m√°gicos, ir√£o criar uma tag link com &lt;code class=&quot;language-text&quot;&gt;rel=prefetch&lt;/code&gt; ou &lt;code class=&quot;language-text&quot;&gt;rel=preload&lt;/code&gt; automaticamente para voc√™ fazer o prefetching ou preloading dos seus chunks dependendo da implementa√ß√£o. Se voc√™ n√£o sabe o que prefetch e preload links fazem, eu recomendo
a leitura do post &lt;a href=&quot;https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf&quot;&gt;Preload, Prefetch And Priorities in Chrome&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Essas foram minhas anota√ß√µes do curso &lt;a href=&quot;https://frontendmasters.com/courses/performance-webpack/&quot;&gt;Web performance with webpack&lt;/a&gt;. Espero que voc√™ tenha aprendido alguma coisa nova hoje, te vejo no pr√≥ximo post! ‚ù§Ô∏è&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Mastering code splitting with webpack]]></title><description><![CDATA[code splitting is a build time process that splits pieces of your code into async chunks, let‚Äôs talk about how Webpack can help us to code‚Ä¶]]></description><link>https://dielduarte.dev/en/mastering-code-splitting-with-webpack/</link><guid isPermaLink="false">https://dielduarte.dev/en/mastering-code-splitting-with-webpack/</guid><pubDate>Wed, 17 Jul 2019 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;code splitting is a build time process that splits pieces of your code into async chunks, let‚Äôs talk about how Webpack can help us to code split and achieve the goal of better website performance.&lt;/p&gt;
&lt;h2 class=&quot;subtitle--separator&quot;&gt;But first, How to know when I have to split my code?&lt;/h2&gt;
&lt;p&gt;The most expensive part of rendering websites is about downloading, and parsing  Javascript and css. That said, if we don‚Äôt need to render a specific piece of code on the first render, this code is a good candidate to split and be downloaded by demand, no secrets so far.&lt;/p&gt;
&lt;p&gt;Google Chrome has a nice dev tool called &lt;code class=&quot;language-text&quot;&gt;coverage&lt;/code&gt; that shows what percentage of the code delivered it‚Äôs being used. This might be used as a metric to follow and know how much code might be split and downloaded by demand. &lt;/p&gt;
&lt;p&gt;To use the coverage tool just open your dev tools, &lt;code class=&quot;language-text&quot;&gt;cmd/ctrl + p&lt;/code&gt;, and type &lt;code class=&quot;language-text&quot;&gt;show coverage&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/coverage.png&quot; alt=&quot;image showing how to access coverage tab on chrome dev tools&quot;&gt; &lt;/p&gt;
&lt;p&gt;then, on the coverage tab click on the reload button and wait until the website is reloaded, this will show you how much code you are using on that specific page per asset downloaded. It‚Äôs AMAZING! üòç&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/images/result.png&quot; alt=&quot;image showing coverage tab, where we can see a list of assets downloaded and how much code is not being used in red.&quot;&gt; &lt;/p&gt;
&lt;p&gt;In the example above, 46% of the code delivered is &lt;code class=&quot;language-text&quot;&gt;not&lt;/code&gt; being used! but that metric is also relative, depends on file size and many other variables, so the context/scenario is super important when using these tools.&lt;/p&gt;
&lt;h2&gt;Code splitting and webpack&lt;/h2&gt;
&lt;p&gt;With webpack we have two ways to work with code splitting, static and ‚Äúdynamic‚Äù imports, both using &lt;a href=&quot;https://v8.dev/features/dynamic-import&quot;&gt;dynamic imports es2020 feature&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Static import&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Good to use when importing heavy javascript libraries/modules&lt;/li&gt;
&lt;li&gt;Anything temporal - things that aren‚Äôt visible all the time on your page, tooltip, modal/dialog and even the rest of the page that comes only on scroll could be considered temporal&lt;/li&gt;
&lt;li&gt;Routes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To use static imports on your code just do: &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;path/to/myModule.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Or, even better, making a function to import the module when necessary, the import of the file itself is made just one time, then is cached and the next time calling the function the module is returned instantly, e.g:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; getModule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; ‚áí &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;path/to/myModule.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;getModule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Dynamic import&lt;/h3&gt;
&lt;p&gt;‚ÄúDynamic‚Äù imports aren‚Äôt really dynamic since they are made at build time. Using dynamic imports it‚Äôs like saying to Webpack: Hey Webpack, please do all possibilities of chunks in this specific path at build time. So in this way, we can pass the chunk file that we wanna import using variables which makes this process kinda dynamic.&lt;/p&gt;
&lt;p&gt;Considering we have a folder of themes like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;themes
  ‚îî‚îÄ‚îÄ dark&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;js
  ‚îî‚îÄ‚îÄ light&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;js&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As an example we can do like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; getTheme &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;theme&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; ‚áí &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;path/to/themes/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;theme&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;getTheme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;dark&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;theme&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This way webpack will create chunks for each theme file inside the themes folder, this technique is called &lt;code class=&quot;language-text&quot;&gt;ContextModule&lt;/code&gt; into webpack code. &lt;/p&gt;
&lt;h2&gt;Magic comments&lt;/h2&gt;
&lt;h3&gt;webpackChunkName&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* webpackChunkName: &quot;my-chunk-name&quot; */&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;path/to/myModule.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;By default webpack creates chunk names following a numeral order, 1.js, 2.js, 3.js which makes the process of debugging harder to recognize which file was imported. using &lt;code class=&quot;language-text&quot;&gt;webpackChunkName&lt;/code&gt; we can rename the chunk file, it‚Äôs important to remember that for this magic comment work we should be using the config &lt;code class=&quot;language-text&quot;&gt;output.chunkFileName: [name].whateverDoYouWantHere.js&lt;/code&gt; on webpack.config file.&lt;/p&gt;
&lt;p&gt;this is only helpful on dev mode, so we can do like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NODE_ENV&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;development&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* webpackChunkName: &quot;my-chunk-name&quot; */&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;path/to/myModule.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;path/to/myModule.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt; part will be removed if the build is running in production mode, and the &lt;code class=&quot;language-text&quot;&gt;else&lt;/code&gt; part if in dev mode. This is known as dead-code elimination, tools like Uglify.js and others do that to reduce bundle size.&lt;/p&gt;
&lt;h3&gt;webpackMode&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* webpackMode: &quot;lazy&quot; */&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;path/to/themes/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;theme&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;the magic comment webpackMode has four types of value:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;lazy: generate chunks for each dynamic imported module, perfect choice to be used in production mode.&lt;/li&gt;
&lt;li&gt;lazy-once: generate a single chunk that can satisfy all calls to import statement, perfect  choice to dev mode reducing the ‚Äúbundling‚Äù time.&lt;/li&gt;
&lt;li&gt;eager: generates no extra chunk, all modules are included in the current chunk and no additional network requests are made. &lt;/li&gt;
&lt;li&gt;weak: this is useful for universal rendering when required chunks are always manually served in initial requests, a Promise is still returned, but only successfully resolves if the chunks are already with the client. If the module is not available, the Promise is rejected. A network request will never be performed&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Prefetch and Preload&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* webpackPrefetch: true */&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;path/to/themes/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;theme&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* webpackLoad: true */&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;path/to/themes/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;theme&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;both comments above will create a link tag with &lt;code class=&quot;language-text&quot;&gt;rel=prefetch&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;rel=preload&lt;/code&gt; automatically for you, prefetching or preloading your chunks depends on the situation. if you don‚Äôt know what prefetch and preload links do, I highly recommend you to read that post &lt;a href=&quot;https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf&quot;&gt;Preload, Prefetch And Priorities in Chrome&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This were my notes of &lt;a href=&quot;https://frontendmasters.com/courses/performance-webpack/&quot;&gt;Web performance with webpack&lt;/a&gt; course, I hope you have learned something new today, see you next time! ‚ù§Ô∏è&lt;/p&gt;</content:encoded></item></channel></rss>